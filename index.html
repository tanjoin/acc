<!DOCTYPE html>
<html>
  <head>
    <title>aac</title>
    <meta charset="utf-8">
    <meta name="description" content="acc">
    <meta name="author" content="tanjoin">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css">
    <link rel="shortcut icon" href="">
  </head>
  <body>
    <div id="contents"></div>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>
    <script>
      function nullToEmpty(string) {
        
      };
      
      window.onload = function(){
        var httpObj = new XMLHttpRequest();
        httpObj.open("get", "campaign.json", true);
        httpObj.onload = function() {
          var data = JSON.parse(this.responseText);
          
          var row = document.createElement("div");
          row.className = "row";
          document.getElementById("contents").appendChild(row);
                   
          for (var i = 0; i < data.campaigns.length; i++) {
            var campaign = data.campaigns[i];

            var col = document.createElement("div");
            col.className = "col s12 m6 l3";
            row.appendChild(col);            
            
            if (campaign.urls.length > 0) {
              var cardLink = document.createElement("a");
              cardLink.href = campaign.urls[j];
              col.appendChild(cardLink);
              var card = document.createElement("div");
              card.className = "card blue-grey darken-3";
              cardLink.appendChild(card);
            } else {
              var card = document.createElement("div");
              card.className = "card blue-grey darken-3";
              col.appendChild(card);
            }
            
            var cardContent = document.createElement("div");
            cardContent.className = "card-content white-text";
            card.appendChild(cardContent);

            var cardId = document.createElement("span");
            cardId.className = "blue";
            cardId.innerText = campaign.id;
            cardContent.appendChild(cardId);
            
            var cardService = document.createElement("div");
            cardService.className = "amber";
            cardService.innerText = campaign.service_title;
            cardContent.appendChild(cardService);
            
            var cardDay = document.createElement("div");
            cardDay.innerText = campaign.date.start || '';
            cardDay.innerText += "～";
            cardDay.innerText += campaign.date.end || '';
            cardContent.appendChild(cardDay);
            
            var cardTitle = document.createElement("span");
            cardTitle.className = "card-title";
            cardTitle.innerText = campaign.title;
            cardContent.appendChild(cardTitle);
            
            var description = document.createElement("p");
            description.innerText = campaign.description;
            cardContent.appendChild(description);
            
            var cardAction = document.createElement("div");
            cardAction.className = "card-action";
            var isAddCardAction = false;
            for (var j = 0; j < campaign.urls.length; j++) {
              var alink = document.createElement("a");
              alink.href = campaign.urls[j];
              alink.innerText = "その" + (j+1);
              cardAction.appendChild(alink);
              isAddCardAction = true;
            }
            if (isAddCardAction) {
              cardContent.appendChild(cardAction);
            }
          }
        };
        httpObj.send(null);
      }
    </script>
  </body>
</html>
